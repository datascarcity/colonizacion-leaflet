
<!DOCTYPE html>
<html>
<head>
	
	<title>Colonización Interior - Mapa</title>

	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.3/dist/leaflet.css" integrity="sha512-07I2e+7D8p6he1SIM+1twR5TIrhUQn9+I6yjqD53JQjFiMf8EtC93ty0/5vJTZGF8aAocvHYNEDJajGdNx1IsQ==" crossorigin=""/>

    <script src="https://unpkg.com/leaflet@1.0.3/dist/leaflet.js" integrity="sha512-A7vV8IFfih/D732iSSKi20u/ooOfj/AGehOKq0f4vLT1Zr2Y+RX7C+w8A1gaSasGtRUZpF/NZgzSAu4/Gc41Lg==" crossorigin=""></script>
    <script src="js/leaflet.ajax.min.js"></script>
    <script src="js/jquery-3.2.1.min.js"></script>

	<style>
		#map {
			width: 100%;
			height: 90vh;
		}
	</style>

	<style>
	.info { padding: 6px 8px; font: 14px/16px Arial, Helvetica, sans-serif; background: white; background: rgba(255,255,255,0.8); box-shadow: 0 0 15px rgba(0,0,0,0.2); border-radius: 5px; }
	.info h4 { margin: 0 0 5px; color: #777; }
	.legend { text-align: left; line-height: 18px; color: #555; }
	.legend i { width: 18px; height: 18px; float: left; margin-right: 8px; opacity: 0.7; }
	.legend .circle {
		border-radius: 50%;
		width: 10px;
		height: 10px;
		margin-top: 8px;
	}

	</style>

	
</head>
<body>



<div id='map'></div>
<script>

	var mymap = L.map('map', {
		center:[40.4168, -3.7038],
		zoom: 6,
		scrollWheelZoom: false
	});

	L.tileLayer('https://api.mapbox.com/styles/v1/mapbox/light-v9/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoidXJiYW5vdmlpaSIsImEiOiJjaWxmODU2ODIwMDJ5dmxsejRva3FyaWU0In0.xUle2zZJMfYkhXdZUsrlqQ', {
		maxZoom: 10,
		attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
			'<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
			'Imagery © <a href="http://mapbox.com">Mapbox</a>',
		id: 'mapbox.streets'
	}).addTo(mymap);

mymap.once('focus', function() { mymap.scrollWheelZoom.enable(); });

//municipios penales
var mpn_style = {
    radius: 4,
    fillColor: "#FF9000", //naranja principal
    color: "#000",
    weight: 0,
    opacity: 1,
    fillOpacity: 1
};

//embalses
var emb_style = {
    radius: 4,
    fillColor: "#65A5D1", //azul claro
    color: "#000",
    weight: 0,
    opacity: 1,
    fillOpacity: 1
};

//colonias penitenciarias
var col_style = {
    radius: 4,
    fillColor: "#BF8130", //naranja obscuro
    color: "#000",
    weight: 0,
    opacity: 1,
    fillOpacity: 1
};

//poblados de colonización
var pob_style = {
    radius: 4,
    fillColor: "#FF4500", //rojo principal
    color: "#000",
    weight: 0,
    opacity: 1,
    fillOpacity: 1
};

$.getJSON("data/ZonasRiego.geojson", function(zon_data){
	L.geoJson(zon_data,{
		style: function(feature){
		var fillColor,
			type = feature.properties.Tipo;
		if (type == "A") fillColor = "#00B060";
		else if (type == "B") fillColor = "#218457";
		else if (type == "C") fillColor = "#00733E";
		else fillColor = "#f7f7f7"; //no data
		return { color: "#999", weight: 0, fillColor: fillColor, fillOpacity: .6};
	},
	onEachFeature: function (feature, layer){
		layer.bindPopup( "<strong>Zona de Riego</br>Nombre: </strong>" + feature.properties.Nombre + "<br/>" + "<strong> Tipo: </strong>" + feature.properties.D_Tipo + "<br/>" + "<strong> Estado: </strong>" +feature.properties.D_Estado)
	}
} ).addTo(mymap);
});

$.getJSON("data/MunicipiosPenales.geojson", function(mpn_data){
	L.geoJson(mpn_data, {
		pointToLayer: function (feature, latlng) {
			return L.circleMarker(latlng, mpn_style);
		},
		onEachFeature: function (feature, layer){
		layer.bindPopup( "<strong>Municipio Penal</br> Nombre: </strong>" + feature.properties.NOMBRE + ", (" + feature.properties.PROVINCIA + ")<br/>"  + "<strong> Tipo: </strong>" + feature.properties.TIPO_ENTID + "<br/>" + "<strong> Período: </strong>" + feature.properties.PENALES_10 )
	}
	}).addTo(mymap);
});

$.getJSON("data/EmbalsesGenV3.geojson", function(emb_data){
	L.geoJson(emb_data, {
		pointToLayer: function (feature, latlng) {
			return L.circleMarker(latlng, emb_style);
		},
		onEachFeature: function (feature, layer){
		layer.bindPopup( "<strong>Embalse</br> Nombre: </strong>" + feature.properties.Nombre + "</br>" +"<strong> Ubicación: </strong>" + feature.properties.Nombre + " (" + feature.properties.Provincia + ")<br/>"  + "<strong> Río: </strong>" + feature.properties.Rio + "<br/>" + "<strong> Cuenca: </strong>" + feature.properties.Cuenca + "<br/>" + "<strong> Año de construcción: </strong>" + feature.properties.Anyo )
	}
	}).addTo(mymap);
});


$.getJSON("data/ColoniasPenitenciarias.geojson", function(col_data){
	L.geoJson(col_data, {
		pointToLayer: function (feature, latlng) {
			return L.circleMarker(latlng, col_style);
		},
		onEachFeature: function (feature, layer){
		layer.bindPopup( "<strong>Colonia Penitenciaria</br> Agrupación: </strong>" + feature.properties.AGRUPACION + "</br>" +"<strong> Entidad: </strong>" + feature.properties.ENTIDAD + "<br/>"  + "<strong> Municipio: </strong>" + feature.properties.MUNICIPIO + "<br/>")
	}
	}).addTo(mymap);
});

$.getJSON("data/PobladosColonizacion.geojson", function(pob_data){
	L.geoJson(pob_data, {
		pointToLayer: function (feature, latlng) {
			return L.circleMarker(latlng, pob_style);
		}
	}).addTo(mymap);
});


var legend = L.control({position: 'bottomright'});

legend.onAdd = function (mymap) {

	 var div = L.DomUtil.create('div', 'info legend'),
	 div.innerHTML = 'Poblados de Colonización<br>Colonias Penitenciarias',
	 //div.innerHTML = '<i style="background: #e5f5e0>" </i> Poblados de Colonización <br> Colonias Penitenciarias <br> Embalses';
	 return div;        
};

legend.addTo(mymap);
</script>

</body>
</html>
